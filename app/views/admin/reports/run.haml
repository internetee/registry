- content_for :actions do
  = link_to(t(:back), admin_reports_path, class: "btn btn-default")
- content_for :page_name do
  = @page_title
= render "shared/title", name: @report.name

.row
  .col-md-12
    = form_with url: run_admin_report_path(@report), html: { style: 'margin-bottom: 0;', autocomplete: 'off' } do |f|
      - if @report.parameters.present?
        - @report.parameters.each do |param, props|
          .row
            .col-md-6
              .form-group
                = label_tag param, param.humanize
                - if props["type"] == "date"
                  = f.date_field param, class: 'form-control', value: params[param] || props['default']
                - elsif props["type"] == "string"
                  = f.text_field param, class: 'form-control', value: params[param] || props['default']
      .row
        .col-md-12
          .d-flex.flex-wrap.gap-2
            %button.btn.btn-primary
              = t('admin.reports.index.run')
            %button.btn.btn-primary{ type: 'submit', name: 'format', value: 'csv' }
              = t('.csv_btn')

%hr

.row
  .col-md-12
    - if @results.any?
      .table-responsive
        %table.table.table-hover.table-bordered.table-condensed
          %thead
            %tr
              - @results.columns.each do |column|
                %th= column.humanize
          %tbody
            - @results.rows.each do |row|
              %tr
                - row.each do |value|
                  %td= value
    - else
      %p No results found or error running the report.